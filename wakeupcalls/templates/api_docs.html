<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vamshi Wake-up Calls API Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }
        .method-get { color: #28a745; }
        .method-post { color: #007bff; }
        .method-patch { color: #ffc107; }
        .method-put { color: #fd7e14; }
        .method-delete { color: #dc3545; }
        .deprecated { 
            background: #fff3cd; 
            border: 1px solid #ffeaa7; 
            padding: 10px; 
            border-radius: 4px; 
            margin: 10px 0;
        }
        .recommended { 
            background: #d4edda; 
            border: 1px solid #c3e6cb; 
            padding: 10px; 
            border-radius: 4px; 
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1><i class="bi bi-api"></i> Vamshi Wake-up Calls API</h1>
        <p class="lead">Simple, intuitive REST API for managing wake-up calls</p>

        <!-- Quick Start -->
        <div class="card mb-4">
            <div class="card-header">
                <h3><i class="bi bi-rocket"></i> Quick Start</h3>
            </div>
            <div class="card-body">
                <div class="recommended">
                    <strong>✅ RECOMMENDED:</strong> Use standard REST methods for all operations
                </div>
                
                <h5>Common Operations:</h5>
                
                <h6>1. Change Status (Cancel, Pause, Activate)</h6>
                <div class="code-block">
                    <span class="method-patch">PATCH</span> /api/wakeup-calls/23/<br>
                    Content-Type: application/json<br><br>
                    {"status": "cancelled"}
                </div>

                <h6>2. Update Schedule</h6>
                <div class="code-block">
                    <span class="method-patch">PATCH</span> /api/wakeup-calls/23/<br>
                    Content-Type: application/json<br><br>
                    {"scheduled_time": "07:00:00", "frequency": "daily"}
                </div>

                <h6>3. Change Contact Method</h6>
                <div class="code-block">
                    <span class="method-patch">PATCH</span> /api/wakeup-calls/23/<br>
                    Content-Type: application/json<br><br>
                    {"contact_method": "sms", "phone_number": "+1234567890"}
                </div>
            </div>
        </div>

        <!-- Full API Reference -->
        <div class="card mb-4">
            <div class="card-header">
                <h3><i class="bi bi-book"></i> Complete API Reference</h3>
            </div>
            <div class="card-body">
                
                <h4>Wake-up Calls</h4>
                
                <h5><span class="method-get">GET</span> /api/wakeup-calls/</h5>
                <p>List all wake-up calls for the authenticated user</p>
                
                <h5><span class="method-post">POST</span> /api/wakeup-calls/</h5>
                <p>Create a new wake-up call</p>
                <div class="code-block">
                {
                    "name": "Morning Workout",
                    "phone_number": "+1234567890",
                    "contact_method": "call",
                    "scheduled_time": "06:30:00",
                    "frequency": "weekdays",
                    "include_weather": true,
                    "custom_message": "Time for your workout!"
                }
                </div>
                
                <h5><span class="method-get">GET</span> /api/wakeup-calls/{id}/</h5>
                <p>Retrieve a specific wake-up call</p>
                
                <h5><span class="method-patch">PATCH</span> /api/wakeup-calls/{id}/</h5>
                <p><strong>Recommended:</strong> Update any field(s) of a wake-up call</p>
                <div class="code-block">
                // Examples:
                {"status": "paused"}
                {"scheduled_time": "07:00:00"}
                {"contact_method": "sms"}
                {"custom_message": "Updated message"}
                {"include_weather": false}
                </div>
                
                <h5><span class="method-put">PUT</span> /api/wakeup-calls/{id}/</h5>
                <p>Full update of a wake-up call (all fields required)</p>
                
                <h5><span class="method-delete">DELETE</span> /api/wakeup-calls/{id}/</h5>
                <p>Delete a wake-up call</p>

                <h4>Testing</h4>
                
                <h5><span class="method-post">POST</span> /api/wakeup-calls/{id}/test-now/</h5>
                <p>Test a wake-up call immediately (voice with SMS fallback)</p>
                
                <h5><span class="method-post">POST</span> /api/wakeup-calls/{id}/test-sms/</h5>
                <p>Test with direct SMS (bypasses voice call)</p>

                <h4>Executions</h4>
                
                <h5><span class="method-get">GET</span> /api/wakeup-calls/executions/</h5>
                <p>List all execution history</p>
                
                <h5><span class="method-get">GET</span> /api/wakeup-calls/{id}/executions/</h5>
                <p>List executions for a specific wake-up call</p>
            </div>
        </div>

        <!-- Status Values -->
        <div class="card mb-4">
            <div class="card-header">
                <h3><i class="bi bi-info-circle"></i> Field Values</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h5>Status</h5>
                        <ul>
                            <li><code>active</code> - Running normally</li>
                            <li><code>paused</code> - Temporarily disabled</li>
                            <li><code>cancelled</code> - Permanently stopped</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h5>Contact Method</h5>
                        <ul>
                            <li><code>call</code> - Voice call</li>
                            <li><code>sms</code> - Text message</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h5>Frequency</h5>
                        <ul>
                            <li><code>once</code> - One time only</li>
                            <li><code>daily</code> - Every day</li>
                            <li><code>weekly</code> - Once per week</li>
                            <li><code>weekdays</code> - Mon-Fri</li>
                            <li><code>weekends</code> - Sat-Sun</li>
                            <li><code>custom</code> - Specific days</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Deprecated Endpoints -->
        <div class="card mb-4">
            <div class="card-header">
                <h3><i class="bi bi-exclamation-triangle"></i> Deprecated Endpoints</h3>
            </div>
            <div class="card-body">
                <div class="deprecated">
                    <strong>⚠️ DEPRECATED:</strong> These endpoints still work but will be removed. Use PATCH instead.
                </div>
                
                <h5>Old Confusing Way:</h5>
                <div class="code-block">
                <span class="method-post">POST</span> /api/wakeup-calls/23/status/ {"status": "cancelled"}<br>
                <span class="method-post">POST</span> /api/wakeup-calls/23/schedule/ {"scheduled_time": "07:00:00"}<br>
                <span class="method-post">POST</span> /api/wakeup-calls/23/contact-method/ {"contact_method": "sms"}
                </div>
                
                <h5>New Simple Way:</h5>
                <div class="code-block">
                <span class="method-patch">PATCH</span> /api/wakeup-calls/23/ {"status": "cancelled"}<br>
                <span class="method-patch">PATCH</span> /api/wakeup-calls/23/ {"scheduled_time": "07:00:00"}<br>
                <span class="method-patch">PATCH</span> /api/wakeup-calls/23/ {"contact_method": "sms"}
                </div>
            </div>
        </div>

        <!-- Authentication -->
        <div class="card mb-4">
            <div class="card-header">
                <h3><i class="bi bi-shield-check"></i> Authentication</h3>
            </div>
            <div class="card-body">
                <p>All API endpoints require authentication. Include your session cookie or use token authentication.</p>
                
                <h5>Session Authentication (Web)</h5>
                <div class="code-block">
                // Login first at /accounts/login/
                // Then make API calls with session cookie
                </div>
                
                <h5>Token Authentication (External)</h5>
                <div class="code-block">
                Authorization: Token your-api-token-here
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="/" class="btn btn-primary">← Back to App</a>
            <a href="/admin/" class="btn btn-secondary">Django Admin</a>
        </div>
    </div>
</body>
</html>
